## CPU负载均衡

运行方式 sudo python3 xdp_cpujunheng.py ens33

ens33是端口名。可替换为lo等等

作用：

实现对传入数据包的动态负载均衡。通过将传入的数据包在多个CPU之间均衡分配，可以达到以下几个方面的用处：

1. 提高系统的并发处理能力：通过将数据包分散到多个CPU上处理，可以提高系统的并发处理能力。每个CPU都可以独立地处理一部分数据包，从而减轻单个CPU的负载压力，提高系统的吞吐量和响应能力。
2. 平衡负载：动态负载均衡可以根据每个CPU的当前负载情况，将数据包分配给负载较轻的CPU。这样可以避免某些CPU负载过高，而其他CPU负载较低的情况，实现系统资源的合理分配，提高系统的整体性能和效率。
3. 提高系统的容错性：通过将数据包分散到多个CPU上处理，即使其中一个CPU出现故障或负载过高，其他CPU仍然可以继续处理数据包，确保系统的可用性和稳定性。
4. 灵活配置权重：代码中使用了权重值来配置每个CPU的处理能力。通过调整不同CPU的权重值，可以根据实际需求分配不同的计算资源。较高权重的CPU将处理更多的数据包，从而充分利用其处理能力。

**v1版本 轮询算法**

算法为将接到的包直接平均分给每一个CPU

**v2版本 加权轮询算法**

使用加权轮询算法相对于原来的版本有以下优势：

1. **负载均衡效果更均衡：** 加权轮询算法可以根据每个CPU的权重分配负载，使得不同CPU处理的负载比例更加均衡。这样可以充分利用系统的计算资源，提高整体性能。
2. **灵活性和可扩展性：** 加权轮询算法可以根据实际需求调整每个CPU的权重。你可以根据不同的场景和需求，为每个CPU分配不同的权重，从而灵活地调整负载均衡策略。
3. **适应动态负载变化：** 加权轮询算法可以应对动态负载变化的情况。通过调整每个CPU的权重，可以根据实时的负载情况动态分配负载，确保每个CPU都能够承担适当的负载。

总之，加权轮询算法可以更好地平衡负载，提高系统的性能和可扩展性，适应不同的负载情况和需求。这使得你的负载均衡方案更加灵活和高效。